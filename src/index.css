@import "tailwindcss";

@variant dark (&:where(.dark, .dark *));

@theme {
    /* Brand Colors - Floating Tiles Dark Palette */
    --color-brand-dark: #0f1115;
    --color-brand-darkSurface: #1a1d24;
    --color-bg-tile: #1a1d24;
    --color-bg-tile-alt: #151921;
    --color-border-subtle: rgba(255, 255, 255, 0.05);
    --color-brand-light: #E2E8F0;
    /* Slate-200 - Darker background for elevation contrast */
    --color-brand-lightSurface: #F1F5F9;
    /* Slate-100 - Cards float above background */
    --color-brand-muted: #E2E8F0;
    /* Slate-200 - Subtle elevation layer */
    --color-brand-accent: #1D4ED8;
    /* Blue-700 - AAA compliant with white text (7.8:1) */

    /* Role Default Colors - AAA Compliant */
    --color-student-accent: #059669;
    /* Emerald-600 - AAA compliant (7.4:1) */
    --color-teacher-accent: #1D4ED8;
    /* Blue-700 - AAA compliant (7.8:1) */

    /* Text Colors */
    --color-brand-textPrimary: #F8FAFC;
    /* Cool White (Slate-50) */
    --color-brand-textSecondary: #94A3B8;
    /* Cool Slate (Slate-400) */
    --color-brand-textDarkPrimary: #111827;
    /* Gray-900 - Near Black for titles (18.4:1 contrast) */
    --color-brand-textDarkSecondary: #4B5563;
    /* Gray-600 - Slate Grey for labels (6.3:1 contrast) */
    --color-brand-textMuted: #64748B;
    /* Slate-500 - Muted/helper text */

    /* Border Colors - Slate Palette */
    --color-border-default: #E2E8F0;
    /* Slate-200 - Standard borders */
    --color-border-strong: #CBD5E1;
    /* Slate-300 - Interactive/emphasized borders */

    /* Status Colors */
    --color-status-progress: #10B981;
    /* Emerald-500 (brighter) */
    --color-status-stuck: #EF4444;
    /* Red-500 (brighter) */
    --color-status-question: #D97706;
    /* Amber */
    --color-status-complete: #3B82F6;
    /* Blue-500 (brighter) */

    /* Task Type Colors - semantic colors for task hierarchy */
    --type-project-color: #a855f7;
    /* Purple-500 */
    --type-assignment-color: #3b82f6;
    /* Blue-500 */
    --type-task-color: #22c55e;
    /* Green-500 */
    --type-subtask-color: #f97316;
    /* Orange-500 */

    /* Elevation Shadows - Layered Ambient Occlusion */
    --shadow-layered-sm: 0 1px 2px rgba(0, 0, 0, 0.05), 0 2px 4px rgba(0, 0, 0, 0.05);
    --shadow-layered: 0 4px 6px rgba(0, 0, 0, 0.05), 0 12px 24px rgba(0, 0, 0, 0.05), 0 24px 48px rgba(0, 0, 0, 0.05);
    --shadow-layered-lg: 0 15px 30px rgba(0, 0, 0, 0.08), 0 30px 60px rgba(0, 0, 0, 0.1);
}

@utility transition-float {
    transition-property: transform, box-shadow, background-color, border-color, color, opacity;
    transition-timing-function: var(--timing-weightless);
    transition-duration: 300ms;
}

@utility background-glass {
    background-color: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

@utility lift-dynamic {
    transform: translateY(var(--elevation-tile-default, -4px));
    transition-property: transform, box-shadow;
    transition-timing-function: var(--timing-weightless);
    transition-duration: 300ms;

    &:hover {
        transform: translateY(var(--elevation-tile-hover, -3px));
    }
}

@utility button-lift-dynamic {
    transition-property: transform, box-shadow;
    transition-timing-function: var(--timing-weightless);
    transition-duration: 300ms;

    &:hover {
        transform: translateY(var(--elevation-button-hover, -1px));
        box-shadow: var(--shadow-layered-lg);
    }
}

/* Universal Responsive Grid - No media queries needed.
   Cards automatically wrap and resize based on available space.
   Min-width can be customized via CSS variable. */
@utility grid-auto-fit {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(var(--grid-min-size, 300px), 1fr));
}

/* Dark mode shadow overrides - REMOVED
   Shadows are now controlled dynamically by GravityBackground.tsx
   based on theme settings (elevationLevel)
*/


/* ============================================
   CSS Custom Properties (Design Tokens)
   ============================================ */
:root {
    /* Spacing Scale */
    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    --spacing-xl: 2rem;

    /* Border Radius - Standardized hierarchy:
       - rounded-xl (12px): Container/Card level (outermost)
       - rounded-lg (8px): Nested elements within cards
       - rounded-md (6px): Buttons, icons, interactive elements */
    --radius-sm: 0.25rem;
    /* 4px - rounded-sm */
    --radius-md: 0.375rem;
    /* 6px - rounded-md */
    --radius-lg: 0.5rem;
    /* 8px - rounded-lg */
    --radius-xl: 0.75rem;
    /* 12px - rounded-xl */
    --radius-2xl: 1rem;
    /* 16px - rounded-2xl */

    /* Border Width - Standardized to 2px */
    --border-width: 2px;

    /* Transitions */
    --transition-fast: 150ms;
    --transition-normal: 200ms;
    --transition-slow: 300ms;
    --timing-weightless: cubic-bezier(0.4, 0, 0.2, 1);

    /* Touch Target Minimum (44px for accessibility) */
    --touch-target-min: 44px;
}

/* ============================================
   Global Styles
   ============================================ */
* {

    /* Hide scrollbar for Chrome, Safari and Opera */
    &::-webkit-scrollbar {
        display: none;
    }

    /* Hide scrollbar for IE, Edge and Firefox */
    -ms-overflow-style: none;
    /* IE and Edge */
    scrollbar-width: none;
    /* Firefox */
}

body {
    @apply bg-transparent text-brand-textPrimary antialiased;
    cursor: default;
    caret-color: transparent;
}

/* ============================================
   Custom Scrollbar (Dark Theme per Floating Tiles)
   ============================================ */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: var(--color-brand-dark, #0f1115);
}

::-webkit-scrollbar-thumb {
    background: #334155;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #475569;
}

.dark ::-webkit-scrollbar-track {
    background: #0f1115;
}

/* Text cursor only on actual text input elements */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="search"],
input[type="url"],
input[type="tel"],
input[type="number"],
textarea,
[contenteditable="true"] {
    cursor: text;
}

/* ============================================
   Form Styling - accent-color & caret-color
   ============================================ */
input[type="date"],
input[type="checkbox"],
input[type="radio"],
input[type="range"] {
    accent-color: var(--color-brand-accent);
}

input,
textarea {
    caret-color: var(--color-brand-textPrimary);
}

/* ============================================
   Semantic Item Type Colors (TaskManager)
   Uses CSS variables for consistency across components
   ============================================ */
.type-project {
    color: var(--type-project-color);
    border-color: var(--type-project-color);
    background-color: color-mix(in srgb, var(--type-project-color) 10%, transparent);
}

.type-assignment {
    color: var(--type-assignment-color);
    border-color: var(--type-assignment-color);
    background-color: color-mix(in srgb, var(--type-assignment-color) 10%, transparent);
}

.type-task {
    color: var(--type-task-color);
    border-color: var(--type-task-color);
    background-color: color-mix(in srgb, var(--type-task-color) 10%, transparent);
}

.type-subtask {
    color: var(--type-subtask-color);
    border-color: var(--type-subtask-color);
    background-color: color-mix(in srgb, var(--type-subtask-color) 10%, transparent);
}

/* Date picker indicator styling */
input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(0.5);
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 0.25rem;
    transition: all var(--transition-fast) ease;
}

input[type="date"]::-webkit-calendar-picker-indicator:hover {
    filter: invert(0.7);
    background-color: rgba(59, 130, 246, 0.1);
}

.dark input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(0.8);
}

.dark input[type="date"]::-webkit-calendar-picker-indicator:hover {
    filter: invert(1);
}

/* ============================================
   Focus-Visible Accessibility
   ============================================ */
*:focus-visible:not(input):not(textarea) {
    outline: 2px solid var(--color-brand-accent);
    outline-offset: 2px;
    border-radius: var(--radius-md);
}

/* Remove default outline when using mouse */
*:focus:not(:focus-visible) {
    outline: none;
}

/* ============================================
   Overflow Fixes (auto instead of scroll)
   ============================================ */
.custom-scrollbar {
    overflow-y: auto;
    /* Changed from scroll to auto */
}

/* ============================================
   React Day Picker Overrides (UI.md aligned)
   ============================================ */
.rdp-custom {
    /* Override default accent color to use our brand accent */
    --rdp-accent-color: var(--color-brand-accent);
    --rdp-accent-background-color: var(--color-brand-accent);

    /* Override day button sizing for proper alignment */
    --rdp-day-width: 36px;
    --rdp-day-height: 36px;
    --rdp-day_button-width: 36px;
    --rdp-day_button-height: 36px;

    /* Selected state border (aligned with UI.md 3px interactive borders) */
    --rdp-selected-border: 3px solid var(--color-brand-accent);
}

/* Ensure selected days have proper border styling per UI.md */
.rdp-custom .rdp-selected .rdp-day_button {
    border: 3px solid var(--color-brand-accent) !important;
    background-color: var(--color-brand-accent) !important;
    color: white !important;
    border-radius: var(--radius-md) !important;
    /* 6px - rounded-md */
}

/* All day buttons should have consistent border-radius */
.rdp-custom .rdp-day_button {
    border-radius: var(--radius-md) !important;
    /* 6px - rounded-md */
}

/* Focused day button should also have rounded-md border-radius */
.rdp-custom .rdp-day_button:focus,
.rdp-custom .rdp-day_button:focus-visible,
.rdp-custom .rdp-focused .rdp-day_button {
    border-radius: var(--radius-md) !important;
    /* 6px - rounded-md */
    outline: 2px solid var(--color-brand-accent) !important;
    outline-offset: 0 !important;
}

/* Today indicator uses subtle ring per UI.md focus rings */
.rdp-custom .rdp-today .rdp-day_button {
    box-shadow: inset 0 0 0 2px rgba(59, 130, 246, 0.2);
    border-radius: var(--radius-md) !important;
    /* 6px - rounded-md */
}

/* Dark mode text colors */
.dark .rdp-custom {
    color: var(--color-brand-textPrimary);
}

.dark .rdp-custom .rdp-day_button {
    color: var(--color-brand-textPrimary);
}

.dark .rdp-custom .rdp-weekday {
    color: #9ca3af;
    /* gray-400 */
}

.dark .rdp-custom .rdp-caption_label {
    color: var(--color-brand-textPrimary);
}

@layer components {

    /* ============================================
       Reusable Input Classes
       ============================================ */
    .input-field {
        @apply w-full px-3 py-2 rounded-lg border-2 transition-all duration-200;
        @apply bg-[var(--color-bg-tile)] font-medium;
        @apply text-brand-textPrimary;
        @apply border-[var(--color-border-subtle)];
        @apply placeholder-brand-textSecondary;
        @apply hover:border-brand-accent;
        @apply focus:outline-none focus:border-brand-accent focus:ring-4 focus:ring-brand-accent/10;
    }

    .input-field-sm {
        @apply w-full px-3 py-2 rounded-lg border-2 transition-all duration-200;
        @apply bg-[var(--color-bg-tile)] font-medium text-sm;
        @apply text-brand-textPrimary;
        @apply border-[var(--color-border-subtle)];
        @apply placeholder-brand-textSecondary;
        @apply hover:border-brand-accent;
        @apply focus:outline-none focus:border-brand-accent focus:ring-4 focus:ring-brand-accent/10;
    }

    /* ============================================
       Card Interactive States
       ============================================ */
    .card-interactive {
        @apply rounded-xl border transition-all duration-200 cursor-pointer;
        @apply border-[var(--color-border-subtle)];
        @apply bg-[var(--color-bg-tile)];
        @apply hover:border-brand-accent;
        @apply active:scale-[0.98];
        /* Light mode: Layered soft shadows for tactile depth */
        box-shadow: var(--shadow-layered);
    }

    .card-interactive:hover {
        transform: translateY(var(--elevation-button-hover, -2px));
        box-shadow: var(--shadow-layered-lg);
    }

    /* Universal Shadow Utilities using dynamic variables */
    .shadow-layered-sm {
        box-shadow: var(--shadow-layered-sm);
    }

    .shadow-layered {
        box-shadow: var(--shadow-layered);
    }

    .shadow-layered-lg {
        box-shadow: var(--shadow-layered-lg);
    }


    /* ============================================
       Floating Tiles: Premium Effect Utilities
       ============================================ */

    /* Rim Light: Edge highlight for physical depth */
    .rim-light {
        box-shadow:
            inset 0 1px 0 0 rgba(255, 255, 255, 0.15),
            inset 0 0 0 1px rgba(255, 255, 255, 0.05);
    }

    /* Glass Panel: Glassmorphism effect */
    .glass-panel {
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* Lift Hover: Weightless interactive feedback with shadow expansion (NOW DYNAMIC) */
    .lift-hover {
        transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1),
            box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1),
            border-color 300ms cubic-bezier(0.4, 0, 0.2, 1);
    }

    .lift-hover:hover {
        transform: translateY(var(--elevation-tile-hover, -8px));
        box-shadow: var(--shadow-layered-lg);
    }

    /* Glow Effects - Controlled via --glow-opacity variable */
    .card-interactive:hover {
        transform: translateY(var(--elevation-button-hover, -2px));
        box-shadow:
            var(--shadow-layered-lg),
            0 0 var(--glow-blur, 0px) var(--glow-spread, 0px) var(--glow-color, transparent);
    }

    .card-interactive-selected {
        @apply border-brand-accent bg-brand-accent/5;
        @apply shadow-lg shadow-brand-accent/15;
    }

    /* ============================================
       Neon/Glow Effects for Active States
       ============================================ */
    .glow-blue {
        box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
    }

    .glow-emerald {
        box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
    }

    .glow-red {
        box-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
    }

    .glow-amber {
        box-shadow: 0 0 10px rgba(245, 158, 11, 0.5);
    }

    .glow-purple {
        box-shadow: 0 0 10px rgba(168, 85, 247, 0.5);
    }

    /* ============================================
       Background Patterns & Blobs
       ============================================ */
    .bg-dots {
        background-color: transparent;
    }

    .dark .bg-dots {
        background-color: transparent;
    }

    .gradient-blob {
        display: none;
    }

    /* App Container for structural depth */
    .app-container {
        @apply relative h-full w-full overflow-hidden flex bg-transparent;
    }

    .dark .app-container {
        @apply bg-transparent;
    }

    /* ============================================
       Background Patterns (Empty/Preview States)
       ============================================ */
    .bg-pattern-dots {
        background-image: radial-gradient(#334155 1px, transparent 1px);
        background-size: 20px 20px;
    }

    /* ============================================
       Navigation Items (Rule J) - Floating Tile Style
       ============================================ */
    .nav-item {
        @apply relative flex items-center rounded-xl font-bold overflow-hidden transition-float;
        /* Default State: Elevated Tile */
        background-color: var(--color-bg-tile);
        border: 1px solid var(--color-border-subtle);
        @apply text-brand-textSecondary;
        box-shadow: var(--shadow-layered-lg);
        transform: translateY(var(--elevation-tile-default, -4px));
        backdrop-filter: blur(var(--tile-blur, 0px));
        -webkit-backdrop-filter: blur(var(--tile-blur, 0px));
    }

    /* Hover State: Higher magnetic pull + Accent Border */
    .nav-item:hover {
        transform: translateY(var(--elevation-tile-hover, -3px));
        border-color: var(--color-brand-accent);
        box-shadow:
            var(--shadow-layered-lg),
            0 0 var(--glow-blur, 0px) var(--glow-spread, 0px) var(--glow-color, transparent);
        @apply text-brand-textPrimary;
    }

    /* Active State: Option 6a refined (Single Etched Top) */
    .nav-item.active {
        @apply text-brand-textPrimary;
        background-color: var(--color-bg-tile);
        border: 1px solid var(--color-border-subtle);
        border-top: var(--horizon-border-top, 1px solid var(--color-border-subtle));
        border-left: var(--horizon-border-left, 1px solid var(--color-border-subtle));
        box-shadow:
            var(--active-inset-shadow, none),
            var(--shadow-layered-lg),
            0 0 var(--glow-blur, 0px) var(--glow-spread, 0px) rgba(59, 130, 246, calc(0.45 * var(--glow-on-active, 0)));
        transform: translateY(var(--elevation-tile-default, -4px));
    }

    /* Active State Logo: Brand Accent */
    .nav-item.active svg {
        color: var(--color-brand-accent);
    }

    /* ============================================
       Levitated Tiles (Universal Premium Style)
       Rule II - Universal Physics
       ============================================ */
    .levitated-tile {
        @apply transition-float;
        background-color: var(--color-bg-tile);
        border: 1px solid var(--color-border-subtle);
        box-shadow: var(--shadow-layered-lg);
        transform: translateY(var(--elevation-tile-default, -4px));
        backdrop-filter: blur(var(--tile-blur, 0px));
        -webkit-backdrop-filter: blur(var(--tile-blur, 0px));
        overflow: visible;
        /* Prevents shadow/elevation clipping */
    }

    .levitated-tile:hover {
        transform: translateY(var(--elevation-tile-hover, -3px));
        box-shadow: var(--shadow-layered-lg);
    }

    /* Active State: "Horizon Etched" / "Active/Levitated" Aesthetic */
    .levitated-tile.active {
        color: white;
        background-color: var(--color-bg-tile);
        border: 1px solid var(--color-border-subtle);
        border-top: var(--horizon-border-top, 1px solid var(--color-border-subtle));
        border-left: var(--horizon-border-left, 1px solid var(--color-border-subtle));
        box-shadow:
            var(--active-inset-shadow, none),
            var(--shadow-layered-lg),
            0 0 var(--glow-blur, 0px) var(--glow-spread, 0px) rgba(59, 130, 246, calc(0.45 * var(--glow-on-active, 0)));
        transform: translateY(var(--elevation-tile-default, -4px));
    }

    .divider-industrial {
        @apply border-[var(--color-border-subtle)];
    }

    /* Card with elevation - for form cards and content panels */
    .card-elevated {
        @apply bg-[var(--color-bg-tile)];
        @apply rounded-2xl border border-[var(--color-border-subtle)];
        box-shadow: var(--shadow-layered);
    }

    /* ============================================
       Button Ghost/Outline Variants
       ============================================ */
    .btn-ghost {
        @apply flex items-center justify-center gap-2 h-12 px-4 rounded-md;
        @apply font-bold transition-all duration-200;
        @apply border-2 border-transparent;
        @apply hover:border-brand-accent text-brand-accent hover:bg-brand-accent/5;
        @apply focus:outline-none focus:ring-2 focus:ring-brand-accent/20;
        @apply disabled:opacity-50 disabled:cursor-not-allowed;
    }

    .btn-ghost-danger {
        @apply flex items-center justify-center gap-2 h-12 px-4 rounded-md;
        @apply font-bold transition-all duration-200;
        @apply border-2 border-transparent;
        @apply text-red-500;
        @apply hover:border-red-500 hover:bg-red-500/5;
        @apply focus:outline-none focus:ring-2 focus:ring-red-500/20;
        @apply disabled:opacity-50 disabled:cursor-not-allowed;
    }

    /* ============================================
       Touch Target Minimum Size
       ============================================ */
    .touch-target {
        min-width: var(--touch-target-min);
        min-height: var(--touch-target-min);
        @apply flex items-center justify-center;
    }

    /* ============================================
       Active/Pressed State for Touch
       ============================================ */
    .btn-tactile:active {
        transform: scale(0.98);
        transition: transform 0.1s ease-out;
    }

    /* ============================================
       Success Animation
       ============================================ */
    @keyframes success-bounce {

        0%,
        100% {
            transform: scale(1);
        }

        50% {
            transform: scale(1.05);
        }
    }

    .animate-success {
        animation: success-bounce 0.3s ease-out;
    }

    /* ============================================
       Skeleton Loading Placeholder
       ============================================ */
    .skeleton-box {
        @apply bg-[var(--color-bg-tile-hover)] rounded animate-pulse;
    }

    .skeleton-text {
        @apply bg-[var(--color-bg-tile-hover)] rounded animate-pulse h-4 w-full;
    }

    .skeleton-text-sm {
        @apply bg-[var(--color-bg-tile-hover)] rounded animate-pulse h-3 w-3/4;
    }

    .skeleton-card {
        @apply bg-[var(--color-bg-tile-hover)] animate-pulse h-20 w-full rounded-2xl;
    }

    /* ============================================
       Data Visualization Containers (Rule D)
       ============================================ */
    .chart-wrapper {
        position: relative;
        width: 100%;
        height: 300px;
        max-height: 400px;
    }

    /* ============================================
       Accordion Animation (grid-template-rows)
       ============================================ */
    .accordion-content {
        display: grid;
        grid-template-rows: 0fr;
        transition: grid-template-rows var(--transition-slow) ease-out;
        overflow: hidden;
    }

    .accordion-content.open {
        grid-template-rows: 1fr;
    }

    .accordion-inner {
        min-height: 0;
    }

    /* Skip link - Accessibility: hidden until focused */
    .skip-link {
        position: absolute;
        top: -40px;
        left: 0;
        padding: 8px 16px;
        background: var(--color-brand-accent);
        color: white;
        z-index: 9999;
        transition: top 0.2s ease;
        font-weight: 600;
        text-decoration: none;
        border-radius: 0 0 8px 0;
    }

    .skip-link:focus {
        top: 0;
        outline: 2px solid white;
        outline-offset: 2px;
    }

    /* Dynamic viewport height utility for mobile browser compatibility */
    .h-screen-safe {
        height: 100vh;
        /* Fallback */
        height: 100dvh;
    }

    /* Safe area insets for notched devices (iPhone X+, etc.) */
    .safe-area-pb {
        padding-bottom: env(safe-area-inset-bottom, 0);
    }

    .safe-area-pt {
        padding-top: env(safe-area-inset-top, 0);
    }

    .safe-area-inset {
        padding-top: env(safe-area-inset-top, 0);
        padding-right: env(safe-area-inset-right, 0);
        padding-bottom: env(safe-area-inset-bottom, 0);
        padding-left: env(safe-area-inset-left, 0);
    }

    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .input-base {
        @apply w-full px-4 py-2.5 rounded-xl border transition-float;
        @apply bg-[var(--color-bg-tile)] text-base min-h-[44px];
        @apply text-brand-textPrimary;
        @apply border-[var(--color-border-subtle)];
        @apply placeholder-brand-textMuted font-medium;
        @apply shadow-layered;
        @apply hover:border-[var(--color-border-strong)] hover:shadow-layered-lg;

        /* Override browser autofill background */
        &:-webkit-autofill,
        &:-webkit-autofill:hover,
        &:-webkit-autofill:focus,
        &:-webkit-autofill:active {
            -webkit-box-shadow: 0 0 0 30px var(--color-brand-light) inset !important;
            -webkit-text-fill-color: var(--color-brand-textDarkPrimary) !important;
            caret-color: var(--color-brand-textDarkPrimary) !important;
        }
    }

    .input-focus {
        @apply focus:outline-none focus:border-[var(--color-border-strong)];
        @apply focus:ring-2 focus:ring-[var(--color-border-subtle)];
        @apply focus:bg-[var(--color-bg-tile-hover)];
    }

    .btn-primary-green {
        @apply w-full flex items-center justify-center gap-2 py-3 px-4 rounded-xl font-bold transition-float;
        @apply bg-[var(--color-bg-tile)] text-brand-textPrimary text-base;
        @apply border border-[var(--color-border-subtle)] shadow-layered;
        @apply hover:bg-[var(--color-bg-tile-hover)] hover:border-brand-accent/50 hover:shadow-layered-lg;
        @apply button-lift-dynamic;
        @apply focus:outline-none focus:ring-2 focus:ring-brand-accent/20;
        @apply disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none;
    }

    .settings-btn {
        @apply p-2 rounded-xl transition-all duration-200;
        @apply bg-[var(--color-bg-tile)];
        @apply border border-[var(--color-border-subtle)];
    }

    .card-base {
        @apply bg-[var(--color-bg-tile)];
        @apply border border-[var(--color-border-subtle)];
        @apply rounded-2xl transition-all shadow-layered-sm;
    }

    /* Responsive padding using min() - shrinks on mobile, caps on desktop */
    .p-responsive {
        padding: min(5vw, 24px);
    }

    .px-responsive {
        padding-left: min(5vw, 24px);
        padding-right: min(5vw, 24px);
    }

    .py-responsive {
        padding-top: min(4vw, 20px);
        padding-bottom: min(4vw, 20px);
    }

    /* Fluid typography using clamp() - smooth scaling between breakpoints
       Pattern: clamp(min, calc(vw + rem), max)
       - rem base ensures user zoom works (accessibility)
       - vw creates responsive scaling
       - clamp() prevents extremes on very small/large screens */
    .text-fluid-xs {
        font-size: clamp(0.75rem, calc(1vw + 0.5rem), 0.875rem);
    }

    .text-fluid-sm {
        font-size: clamp(0.875rem, calc(1.5vw + 0.5rem), 1rem);
    }

    .text-fluid-base {
        font-size: clamp(1rem, calc(2vw + 0.5rem), 1.25rem);
    }

    .text-fluid-lg {
        font-size: clamp(1.125rem, calc(2.5vw + 0.5rem), 1.5rem);
    }

    .text-fluid-xl {
        font-size: clamp(1.25rem, calc(3vw + 0.5rem), 1.75rem);
    }

    .text-fluid-2xl {
        font-size: clamp(1.5rem, calc(4vw + 0.5rem), 2.5rem);
    }

    .text-fluid-3xl {
        font-size: clamp(1.875rem, calc(5vw + 0.5rem), 3rem);
    }

    /* Responsive images with aspect-ratio */
    .img-responsive {
        width: 100%;
        height: auto;
        object-fit: cover;
    }

    .img-square {
        aspect-ratio: 1 / 1;
        object-fit: cover;
    }

    .img-video {
        aspect-ratio: 16 / 9;
        object-fit: cover;
    }

    .img-portrait {
        aspect-ratio: 3 / 4;
        object-fit: cover;
    }

    /* Header fade - gradient fade over bottom 16px (72-88px) */
    .header-fade {
        background: var(--color-brand-lightSurface);
        -webkit-mask-image: linear-gradient(to bottom, black calc(100% - 16px), transparent 100%);
        mask-image: linear-gradient(to bottom, black calc(100% - 16px), transparent 100%);
    }

    .dark .header-fade {
        background: var(--color-brand-darkSurface);
    }

    /* Footer fade - masks entire element, fading top 12px */
    .footer-fade {
        background: var(--color-brand-lightSurface);
        -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 12px);
        mask-image: linear-gradient(to bottom, transparent 0%, black 12px);
    }

    .dark .footer-fade {
        background: var(--color-brand-darkSurface);
    }
}

/* ============================================
   UX Enhancement Animations
   Peak-End Rule celebrations & micro-interactions
   ============================================ */

/* Confetti falling animation */
@keyframes confetti-fall {
    0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
    }

    100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
    }
}

/* Celebration pop-in animation */
@keyframes celebration-pop {
    0% {
        transform: scale(0.5);
        opacity: 0;
    }

    50% {
        transform: scale(1.1);
    }

    100% {
        transform: scale(1);
        opacity: 1;
    }
}

/* Gentle bounce for icons */
@keyframes bounce-gentle {

    0%,
    100% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-10px);
    }
}

/* Single ping animation (doesn't repeat) */
@keyframes ping-once {
    0% {
        transform: scale(1);
        opacity: 1;
    }

    75%,
    100% {
        transform: scale(2);
        opacity: 0;
    }
}

/* Slide up and fade out */
@keyframes slide-up-fade {
    0% {
        transform: translate(-50%, 20px);
        opacity: 0;
    }

    10% {
        transform: translate(-50%, 0);
        opacity: 1;
    }

    90% {
        transform: translate(-50%, 0);
        opacity: 1;
    }

    100% {
        transform: translate(-50%, -20px);
        opacity: 0;
    }
}

/* Fade in for hints */
@keyframes fade-in {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

/* Utility classes for animations */
.animate-confetti-fall {
    animation: confetti-fall ease-out forwards;
}

.animate-celebration-pop {
    animation: celebration-pop 0.4s ease-out forwards;
}

.animate-bounce-gentle {
    animation: bounce-gentle 1s ease-in-out infinite;
}

.animate-ping-once {
    animation: ping-once 0.5s ease-out forwards;
}

.animate-slide-up-fade {
    animation: slide-up-fade 2s ease-out forwards;
}

.animate-fade-in {
    animation: fade-in 0.2s ease-out forwards;
}

/* Checkmark draw animation for task completion */
@keyframes checkmark-draw {
    0% {
        stroke-dashoffset: 100;
    }

    100% {
        stroke-dashoffset: 0;
    }
}

.animate-checkmark {
    stroke-dasharray: 100;
    animation: checkmark-draw 0.3s ease-out forwards;
}

/* ============================================
   TipTap Rich Text Editor Styles
   ============================================ */

/* Base ProseMirror editor styling */
.ProseMirror {
    outline: none;
    min-height: 100px;
}

.ProseMirror>*+* {
    margin-top: 0.75em;
}

/* Placeholder styling */
.ProseMirror p.is-editor-empty:first-child::before {
    color: #9ca3af;
    content: attr(data-placeholder);
    float: left;
    height: 0;
    pointer-events: none;
}

.dark .ProseMirror p.is-editor-empty:first-child::before {
    color: #4b5563;
}

/* List styling */
.ProseMirror ul,
.ProseMirror ol {
    padding-left: 1.5rem;
}

.ProseMirror ul {
    list-style-type: disc;
}

.ProseMirror ol {
    list-style-type: decimal;
}

.ProseMirror li {
    margin: 0.25rem 0;
}

/* Heading styles */
.ProseMirror h1 {
    font-size: 1.75rem;
    font-weight: 700;
    line-height: 1.3;
}

.ProseMirror h2 {
    font-size: 1.375rem;
    font-weight: 700;
    line-height: 1.3;
}

.ProseMirror h3 {
    font-size: 1.125rem;
    font-weight: 600;
    line-height: 1.4;
}

/* Inline code styling */
.ProseMirror code {
    background-color: rgba(59, 130, 246, 0.1);
    border-radius: 0.25rem;
    padding: 0.15rem 0.4rem;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    font-size: 0.875em;
    color: #3b82f6;
}

.dark .ProseMirror code {
    background-color: rgba(59, 130, 246, 0.2);
    color: #60a5fa;
}

/* Code block styling */
.ProseMirror pre {
    background-color: #1e1e1e;
    border-radius: 0.5rem;
    padding: 1rem;
    overflow-x: auto;
    margin: 0.75rem 0;
}

.ProseMirror pre code {
    background: none;
    padding: 0;
    font-size: 0.875rem;
    color: #d4d4d4;
    line-height: 1.5;
}

/* Syntax highlighting - VS Code Dark+ inspired */
.ProseMirror pre .hljs-keyword,
.ProseMirror pre .hljs-selector-tag,
.ProseMirror pre .hljs-built_in {
    color: #569cd6;
}

.ProseMirror pre .hljs-string,
.ProseMirror pre .hljs-attr {
    color: #ce9178;
}

.ProseMirror pre .hljs-number,
.ProseMirror pre .hljs-literal {
    color: #b5cea8;
}

.ProseMirror pre .hljs-comment {
    color: #6a9955;
}

.ProseMirror pre .hljs-function,
.ProseMirror pre .hljs-title {
    color: #dcdcaa;
}

.ProseMirror pre .hljs-variable,
.ProseMirror pre .hljs-params {
    color: #9cdcfe;
}

.ProseMirror pre .hljs-type,
.ProseMirror pre .hljs-class {
    color: #4ec9b0;
}

/* Strong/bold and emphasis/italic */
.ProseMirror strong {
    font-weight: 700;
}

.ProseMirror em {
    font-style: italic;
}

/* Blockquote styling */
.ProseMirror blockquote {
    border-left: 3px solid var(--color-brand-accent);
    padding-left: 1rem;
    margin-left: 0;
    color: #6b7280;
}

.dark .ProseMirror blockquote {
    color: #9ca3af;
}

/* Horizontal rule */
.ProseMirror hr {
    border: none;
    border-top: 2px solid #e5e7eb;
    margin: 1.5rem 0;
}

.dark .ProseMirror hr {
    border-top-color: #374151;
}

/* Selection highlight */
.ProseMirror ::selection {
    background-color: rgba(59, 130, 246, 0.3);
}

/* Rich text editor drop zone visual */
.rich-text-editor.drag-over {
    position: relative;
}

.rich-text-editor.drag-over::after {
    content: 'Drop files here';
    position: absolute;
    inset: 0;
    background: rgba(59, 130, 246, 0.1);
    border: 2px dashed var(--color-brand-accent);
    border-radius: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    color: var(--color-brand-accent);
    pointer-events: none;
    z-index: 10;
}

/* ============================================
   CodeBlockRenderer Styles (Shape of the Day)
   Matches ProseMirror editor styles for consistency
   ============================================ */

/* List styling for rendered content */
.code-block-renderer ul,
.code-block-renderer ol {
    padding-left: 1.5rem;
    margin: 0.5rem 0;
}

.code-block-renderer ul {
    list-style-type: disc;
}

.code-block-renderer ol {
    list-style-type: decimal;
}

.code-block-renderer li {
    margin: 0.25rem 0;
}

/* Strong/bold and emphasis/italic */
.code-block-renderer strong {
    font-weight: 700;
}

.code-block-renderer em {
    font-style: italic;
}

/* Heading styles */
.code-block-renderer h1 {
    font-size: 1.75rem;
    font-weight: 700;
    line-height: 1.3;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
}

.code-block-renderer h2 {
    font-size: 1.375rem;
    font-weight: 700;
    line-height: 1.3;
    margin-top: 0.75rem;
    margin-bottom: 0.5rem;
}

.code-block-renderer h3 {
    font-size: 1.125rem;
    font-weight: 600;
    line-height: 1.4;
    margin-top: 0.5rem;
    margin-bottom: 0.25rem;
}

/* Inline code styling */
.code-block-renderer code:not(pre code) {
    background-color: rgba(59, 130, 246, 0.1);
    border-radius: 0.25rem;
    padding: 0.15rem 0.4rem;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    font-size: 0.875em;
    color: #3b82f6;
}

.dark .code-block-renderer code:not(pre code) {
    background-color: rgba(59, 130, 246, 0.2);
    color: #60a5fa;
}

/* Blockquote styling */
.code-block-renderer blockquote {
    border-left: 3px solid var(--color-brand-accent);
    padding-left: 1rem;
    margin-left: 0;
    color: #6b7280;
}

.dark .code-block-renderer blockquote {
    color: #9ca3af;
}

/* Code Block Wrapper - Containment Styles */
.code-block-wrapper {
    /* Allow wrapper to grow vertically, contain horizontally */
    display: block;
    width: 100%;
    max-width: 100%;
    overflow: hidden;
    /* Clips border-radius corners cleanly */
}

.code-block-wrapper pre {
    margin: 0;
    padding: 0;
    /* pre-wrap: preserves line breaks but wraps long lines */
    white-space: pre-wrap;
    word-break: break-word;
    overflow-wrap: break-word;
    background: transparent;
}

.code-block-wrapper pre code {
    display: block;
    white-space: pre-wrap;
    word-break: break-word;
    overflow-wrap: break-word;
    background: transparent;
}

/* Code block content container */
.code-block-content {
    /* Grows vertically to fit content, contained horizontally */
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    overflow-x: auto;
    overflow-y: visible;
}

.code-block-content pre {
    margin: 0;
    padding: 0;
    background: transparent;
    /* Wrap long lines within container */
    white-space: pre-wrap;
    word-break: break-word;
    overflow-wrap: break-word;
}